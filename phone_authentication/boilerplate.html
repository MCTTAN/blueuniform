<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

        <!-- Add two inputs for "phoneNumber" and "code" -->
        <input type="tel" id="phoneNumber" />
        <input type="text" id="code" />
    
        <!-- Add two buttons to submit the inputs -->
        <button id="sign-in-button" onclick="submitPhoneNumberAuth()">
          SIGN IN WITH PHONE
        </button>
        <button id="confirm-code" onclick="submitPhoneNumberAuthCode()">
          ENTER CODE
        </button>
    
        <!-- Add a container for reCaptcha -->
        <div id="recaptcha-container">

window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(
    "recaptcha-container",
    {
    size: "normal",
    callback: function(response) {
        submitPhoneNumberAuth();
    }
    }
);
          
        </div>
    
        <!-- Add the latest firebase dependecies from CDN -->
        <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-auth.js"></script>
    
    <script>
        
        const firebaseConfig = {
  apiKey: "AIzaSyBxpChnKp_r1fy7B9931Cnxqe0T-OftvgY",
  authDomain: "virtulis-da62b.firebaseapp.com",
  databaseURL: "https://virtulis-da62b.firebaseio.com",
  projectId: "virtulis-da62b",
  storageBucket: "virtulis-da62b.appspot.com",
  messagingSenderId: "727096552336",
  appId: "1:727096552336:web:3434a5e281580db3"
};

firebase.initializeApp(firebaseConfig);

window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(
    "recaptcha-container",
    {
        size: "normal",
        callback: function(response) {
            submitPhoneNumberAuth();
        }
    }
);

function submitPhoneNumberAuth() {
    var phoneNumber = document.getElementById("phoneNumber").value;
    var appVerifier = window.recaptchaVerifier;
        firebase
          .auth()
          .signInWithPhoneNumber(phoneNumber, appVerifier)
          .then(function(confirmationResult) {
            window.confirmationResult = confirmationResult;
          })
          .catch(function(error) {
            console.log(error);
          });
      }


function submitPhoneNumberAuthCode() {
        var code = document.getElementById("code").value;
        confirmationResult
          .confirm(code)
          .then(function(result) {
            var user = result.user;
            console.log(user);
          })
          .catch(function(error) {
            console.log(error);
          });
      }

firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          console.log("USER LOGGED IN");
        } else {
          // No user is signed in.
          console.log("USER NOT LOGGED IN");
        }
      });
}
        
    </script>
    
</body>
</html>